<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // Q no.1- create an object called dog
        const dog = {}
        //or
        const dog1 = new Object()

        // Q No.2- print the dog object on the console.
        console.log(dog)

        //Q No.3- Add name , legs , age, and bark properties for the dog object . the bark property is a method which returns woof woof
        dog.name= "dudu";
        dog.legs = 4;
        dog.age= 2;
        dog.bark= function(){
            return "woof woof"
        }
        console.log(dog)
        console.log(dog.bark())

        // Q No.4- Get name, legs, color, age and bark value from the dog object
        let values= Object.values(dog)
        console.log(values)

        // Q No.5- set new properties to dog object: breed, getDogInfo
        dog.breed = "terriors"
        dog.getDogInfo = function(){
        return `${this.name} is my dog. \nhe has ${this.legs} legs. \nhe is ${this.age} years old. \nhe bark like ${this.bark()}.`
        }
        console.log(dog.getDogInfo())

        // Q No.6- Find the person who has many skills in the users object.
        const users = {
    Alex: {
    email: 'alex@alex.com',
    skills: ['HTML', 'CSS', 'JavaScript'],
    age: 20,
    isLoggedIn: false,
    points: 30
    },
    Asab: {
    email: 'asab@asab.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'Redux', 'MongoDB', 'Express', 'React', 'Node'],
    age: 25,
    isLoggedIn: false,
    points: 50
    },
    Brook: {
    email: 'daniel@daniel.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'React', 'Redux'],
    age: 30,
    isLoggedIn: true,
    points: 50
    },
    Daniel: {
    email: 'daniel@alex.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'Python'],
    age: 20,
    isLoggedIn: false,
    points: 40
    },
    John: {
    email: 'john@john.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'React', 'Redux', 'Node.js'],
    age: 20,
    isLoggedIn: true,
    points: 50
    },
    Thomas: {
    email: 'thomas@thomas.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'React'],
    age: 20,
    isLoggedIn: false,
    points: 40
    },
    Paul: {
    email: 'paul@paul.com',
    skills: ['HTML', 'CSS', 'JavaScript', 'MongoDB', 'Express', 'React', 'Node'],
    age: 20,
    isLoggedIn: false,
    points: 40
    }
}


let max= Number.MIN_VALUE;
let result= '';
for(const key in users){
    const user= users[key]
    if(user.skills.length > max){
        max= user.skills.length;
        result= user
    }
}
console.log(result)

// Q No.7- count the logged in users , count users having greater than equal to 50 point from the following object. 
let countLogIns = 0;
let countPoints=0;
for(const key in users){
    const user= users[key]
    //for count user logged in
    if(user.isLoggedIn){
        countLogIns++
    }
    //for count users having greater than equals to 50 points
    if(user.points>=50){
    countPoints++
    }

}
console.log(countLogIns)
console.log(countPoints)

//Q No.8- Find people who are MERN stack developer from the users object.

for(const key in users){
    const skills= users[key].skills
    if(skills.includes("MongoDB",  "Express", "React", "Node")){
        console.log(`${key} Have MERN stack`)
    }
}

// Q No.9- Set your name in the users object without modifying the original users object


// Q No.10- Get all keys or properties of users object
    const keysOfUsers= Object.keys(users)
    console.log(keysOfUsers)

// Q No.11- Get all the values of users object
    const valuesOfUsers = Object.values(users)
    console.log(valuesOfUsers)

//Q No.12- Use the countries object to print a country name, capital, populations and languages.
    const countries = {
        pakistan: {
            Capital: "Islamabad",
            Populations:2200000,
            languages: ["Urdu", "Punjabi", "Sindhi" ,"Balochi", "Pashto"]
        },
        India : {
            capital:"Mumbai",
            Populations: 26000000,
            languages: ["hindi", "rajis"]
        }
    }
    console.log(Object.entries(countries))

// Q No.13- Create an object literal called personAccount. It has firstName, lastName, incomes, expenses properties and it has totalIncome, totalExpense, accountInfo,addIncome, addExpense and accountBalance methods. Incomes is a set of incomes and its description and expenses is a set of incomes and its description.

    const personAccount ={
        firstName: "Iqra",
        lastName: "Batool",
        incomes: [],
        expenses:[],
        totalIncome: function(){
            let sum=0;
            for(const income of this.incomes){
                sum+=income.amount
            }
            return sum
        },
        totalExpense:function(){
            let sum=0;
            for(const expense of this.expenses){
                sum+=expense.amount
            }
        },
        accountInfo: function(){
            return`${this.firstName}${this.lastName} has total income is ${this.totalIncome()} and total expense is ${this.totalExpense()} with the account balance ${this.accountBalance()}`
        },
        addIncome: function (description, amount){
            this.incomes.push({description, amount})
        },
        addExpense: function(description,amount){
            this.expenses.push({description, amount})
        },
        accountBalance: function(){
            let diff = this.totalIncome() - this.totalExpense()
        return diff
        }
    }
    personAccount.addIncome("salary", 20000)
    personAccount.addExpense("grossary", 32000)
    console.log(personAccount.accountInfo())
    console.log(personAccount.incomes)

    //___________New Question________________________//

    const users2 = [
    {
        _id: 'ab12ex',
        username: 'Alex',
        email: 'alex@alex.com',
        password: '123123',
        createdAt:'08/01/2020 9:00 AM',
        isLoggedIn: false
    },
    {
        _id: 'fg12cy',
        username: 'Asab',
        email: 'asab@asab.com',
        password: '123456',
        createdAt:'08/01/2020 9:30 AM',
        isLoggedIn: true
    },
    {
        _id: 'zwf8md',
        username: 'Brook',
        email: 'brook@brook.com',
        password: '123111',
        createdAt:'08/01/2020 9:45 AM',
        isLoggedIn: true
    },
    {
        _id: 'eefamr',
        username: 'Martha',
        email: 'martha@martha.com',
        password: '123222',
        createdAt:'08/01/2020 9:50 AM',
        isLoggedIn: false
    },
    {
        _id: 'ghderc',
        username: 'Thomas',
        email: 'thomas@thomas.com',
        password: '123333',
        createdAt:'08/01/2020 10:00 AM',
        isLoggedIn: false
    }
    ];


// Q No.14- Imagine you are getting the above users collection from a MongoDB database. a. Create a function called signUp which allows user to add to the collection. If user exists, inform the user that he has already an account.b. Create a function called signIn which allows user to sign in to the application.

//---- User Signup function----
    // checking user existence...
    const userChecking = (email)=> {
        let result = false;
        for(const user of users2){
            if(email == user.email)
                result= true
        }
        return result
    }

    // signup section..
    const signUp = (username, email, password )=>{
        let userExist = userChecking(email)
        if(userExist == true){
            console.log("This user is already exist")
        }
        else{
            let _id = id()
            let  createdAt = currentTime()
            let isLoggedIn= true
            users2.push({_id, username , email, password, createdAt, isLoggedIn})
        }
    }

    // id generation section...
    const id= () =>{
        let string= "abcdefghijklmnopqrstuvwxyz0123456789"
        let id=""
        for(var i= 0; i<5; i++){
            id+= string.charAt(Math.floor(Math.random()*string.length+1))
        } 
        return id
    }
    // current time function..
    const currentTime =() =>{
        const now =  new Date()
        let day= now.getDate()
        let month = now.getMonth()
        let year= now.getFullYear()
        let hour= now.getHours()
        let min= now.getMinutes()
        let sec = now.getSeconds()
        if(day.length<2){
            day = `0${day}`
        }
        if(month.length<2){
            month = `0${month}`
        }
        if(year.length<2){
            year = `0${year}`
        }
        if(hour.length<2){
            hour = `0${hour}`
        }
        if(min.length<2){
            min = `0${min}`
        }
        if(sec.length<2){
            sec = `0${sec}`
        }
        return(`${day}/${month}/${year} ${hour}:${min}:${sec}`)
    }

    signUp('Brook', 'brook@brook.com', '123111')
console.log(users2)
//b. Create a function called signIn which allows user to sign in to the application

    // sign In function 
    const signIn = (email, password) => {
        let result = false
        let login = false
        let pass = false   
        for(const user of users2){
            if(email == user.email){
                if(password == user.password){
                    result= true
                    if(user.isLoggedIn == true)
                        login = true
                    else
                    user.isLoggedIn = true
                } 
                else
                    pass = true  
            }
        if(result == true)
            break
        }

        if(login == true)
            console.log("You are already login")
        else if(result == true)
            console.log("you are logged in to your account")
        else if(pass == true)
            console.log("entered incorrect password")
        else
            console.log("User not found")
    }
    signIn('iqrabatool@gmail.com' , '16243547')
    console.log(users2)


    // Q No.15- The products array has three elements and each of them has six properties.  
    const products = [
    {
    _id: 'eedfcf',
    name: 'mobile phone',
    description: 'Huawei Honor',
    price: 200,
    ratings: [
        { userId: 'fg12cy', rate: 5 },
        { userId: 'zwf8md', rate: 4.5 }
    ],
    likes: []
    },
    {
    _id: 'aegfal',
    name: 'Laptop',
    description: 'MacPro: System Darwin',
    price: 2500,
    ratings: [],
    likes: ['fg12cy']
    },
    {
    _id: 'hedfcg',
    name: 'TV',
    description: 'Smart TV:Procaster',
    price: 400,
    ratings: [{ userId: 'fg12cy', rate: 5 }],
    likes: ['fg12cy']
    }
]

    // a. Create a function called rateProduct which rates the product
    const rateProduct =(productName , userId, rate) =>{
        if(rate<= 5){
            let result = true
            for(const product of products){
                if(productName == product.name){
                    product.ratings.push({userId, rate})
                    result= true
                }
                else{
                    result= false
                }
            }
            if(result == false)
            console.log("this product does not exist")
        else
            console.log("Thanks for your rating")
        }
        else{
            console.log("You have entered invalid number please rate between 0 to 5")
        }
    }
    rateProduct("Th", "iqra", 4.9)
    console.log(products)

    // b. Create a function called averageRating which calculate the average rating of a product
    
    const averageRating =() =>{
        let sumOfRate = 0
        for(const product of products){
            console.log(product.name)
            for(const innerObj of product.ratings){
                sumOfRate += innerObj.rate
            }
            let average = sumOfRate / product.ratings.length
            console.log(average)
        }
    }
    averageRating()

    // Q No.16- Create a function called likeProduct. This function will helps to like to the product if it is not liked and remove like if it was liked.
        const likeProduct =(productName, userId) =>{
            for(const product of products){
                if(productName == product.name){
                    if(product.likes.includes(userId)){
                        let index = product.likes.indexOf(userId)
                        product.likes.splice(index, 1)
                    }
                    else{
                        product.likes.push(userId)
                    }
                }
            }
        }
        likeProduct("TV", "3452")
        console.log(products)


        //////////////===========DAY 08 COMPLETED==========///////////////////
    </script>
</body>
</html>